/* ===== Thème Pelichet ===== */
:root{
  --pel-orange:#ff6a00;
  --pel-black:#0f1115;
  --pel-border:#e6e9ef;
  --pel-muted:#606a7b;
  --pel-bg:#f6f8fb;
  --pel-card:#ffffff;
  --pel-text:#101318;
  --pel-tab:#ffffff;
  --pel-shadow:0 6px 18px rgba(16,19,24,.06);
}
:root[data-theme="dark"]{
  --pel-bg:#0e1117;
  --pel-card:#141821;
  --pel-text:#f2f2f2;
  --pel-muted:#9aa4b2;
  --pel-border:#242a36;
  --pel-tab:#151a23;
  --pel-shadow:0 10px 24px rgba(0,0,0,.35);
}

/* ===== Reset / base ===== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--pel-bg);color:var(--pel-text);
  font:500 16px/1.45 "Trebuchet MS",system-ui,Segoe UI,Roboto,Arial,sans-serif;
}
a{color:inherit}

/* ===== Appbar ===== */
.appbar{
  position:sticky;top:0;z-index:20;
  display:flex;align-items:center;gap:12px;
  padding:10px 14px;background:#fff;color:#111;
  box-shadow:0 4px 14px rgba(0,0,0,.06);
  border-bottom:1px solid #eef1f6;
}
:root[data-theme="dark"] .appbar{background:#141821;color:#fff;border-bottom:1px solid var(--pel-border);box-shadow:var(--pel-shadow)}
.appbar .logo{width:36px;height:36px;border-radius:10px}
.appbar h1{margin:0;font-size:1.05rem;letter-spacing:.2px}
.spacer{flex:1}
.icon-btn{
  border:1px solid var(--pel-border);background:var(--pel-card);color:var(--pel-text);
  padding:.5rem .7rem;border-radius:.7rem;cursor:pointer;display:inline-flex;align-items:center;gap:.4rem;
  box-shadow:var(--pel-shadow)
}

/* ===== Tabs ===== */
.tabs{
  display:flex;gap:.5rem;flex-wrap:wrap;
  padding:12px 14px 0;max-width:1100px;margin:0 auto;
}
.tab{
  border:1px solid var(--pel-border);background:var(--pel-tab);color:var(--pel-muted);
  padding:.55rem .9rem;border-radius:999px;cursor:pointer;transition:.18s ease;font-weight:600
}
.tab:hover{transform:translateY(-1px)}
.tab.active{background:var(--pel-orange);color:#000;border-color:transparent}

/* ===== Container & cards ===== */
.wrap{max-width:1100px;margin:12px auto 24px;padding:0 14px}
.tabContent{display:none}
.tabContent.active{display:block}
.card{
  background:var(--pel-card);border:1px solid var(--pel-border);border-radius:16px;
  padding:18px;box-shadow:var(--pel-shadow)
}
.card h2{margin:0 0 10px;font-size:1.05rem}
.grid{display:grid;gap:16px}
.row{display:grid;gap:6px}
label{color:var(--pel-muted);font-weight:600;font-size:.95rem}
input[type="date"],input[type="text"],select,textarea,input[type="file"]{
  width:100%;padding:.65rem .75rem;border-radius:12px;border:1px solid var(--pel-border);
  background:transparent;color:var(--pel-text)
}
textarea{min-height:90px}
.hstack{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
small{color:var(--pel-muted)}

/* ===== Boutons ===== */
.btn{
  border:1px solid var(--pel-border);background:var(--pel-card);color:var(--pel-text);
  padding:.6rem 1rem;border-radius:12px;cursor:pointer;font-weight:700;box-shadow:var(--pel-shadow)
}
.btn.primary{background:var(--pel-orange);color:#000;border-color:transparent}
.btn:active{transform:translateY(1px)}
.btn.sm{padding:.45rem .7rem;border-radius:10px;font-weight:600}
.btn.gray{background:#eef2f7;color:#222;border-color:#e3e7ee}
:root[data-theme="dark"] .btn.gray{background:#1b2130;color:#e9eaec;border-color:#2a3346}

/* ===== Contrôles (look comme captures) ===== */
.controls-card{background:var(--pel-card);border:1px solid var(--pel-border);border-radius:16px;padding:12px;box-shadow:var(--pel-shadow)}
.control-item{
  background:var(--pel-card);
  border:1px solid var(--pel-border);
  border-radius:14px;
  padding:12px 14px;margin:8px 0;
  box-shadow:0 1px 0 rgba(16,19,24,.03);
}
.control-item .question{margin:0 0 8px 0;font-size:.98rem;color:var(--pel-text)}
.radio-pills{display:flex;gap:16px;align-items:center}
.radio-pills label{display:flex;gap:8px;align-items:center;color:var(--pel-text);font-weight:600}
.radio-pills input[type="radio"]{accent-color:var(--pel-orange)}
.koDetails{margin-top:10px;padding:10px;border:1px dashed var(--pel-border);border-radius:12px;background:#fff7f0}
:root[data-theme="dark"] .koDetails{background:#2a1f18}
.koDetails.hidden{display:none}

/* Zone “Décoder un code-barres (photo)” */
.decode-box{
  background:var(--pel-card);border:1px solid var(--pel-border);border-radius:16px;padding:12px;box-shadow:var(--pel-shadow)
}
.decode-actions{display:flex;gap:8px;flex-wrap:wrap}
.decode-actions .btn-icon{display:inline-flex;gap:6px;align-items:center}

/* ===== KPI ===== */
.kpi-card{background:var(--pel-card);border:1px solid var(--pel-border);border-radius:16px;padding:16px;box-shadow:var(--pel-shadow);margin:12px 0}
.kpi table{width:100%;border-collapse:collapse;font-size:.95rem}
.kpi th,.kpi td{padding:8px 10px;border-top:1px solid var(--pel-border)}
.kpi th{text-align:left;color:var(--pel-muted)}

/* ===== Scanner modal ===== */
.scanner-modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.55);z-index:99}
.scanner-box{width:min(520px,92vw);background:var(--pel-card);border:1px solid var(--pel-border);border-radius:16px;padding:14px;box-shadow:var(--pel-shadow)}
#scannerVideo{width:100%;height:auto;background:#000;border-radius:12px}
.scanner-actions{display:flex;gap:8px;margin-top:8px}
.hint{color:var(--pel-muted);font-size:.9rem;margin:.3rem 0 0}

/* ===== Loader global + barre ===== */
#globalLoader{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:9999}
#globalLoader .box{background:#111;color:#fff;padding:14px 16px;border-radius:12px;min-width:230px;text-align:center}
#globalLoader .spin{width:28px;height:28px;border:3px solid #999;border-top-color:var(--pel-orange);border-radius:50%;margin:0 auto 8px;animation:spin .85s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.progress-wrap{margin-top:10px;background:#333;border-radius:8px;height:10px;overflow:hidden}
.progress-bar{width:40%;height:100%;background:var(--pel-orange);animation:loader-move 1.1s linear infinite}
@keyframes loader-move{0%{transform:translateX(-120%)}100%{transform:translateX(220%)}}

/* ===== Responsive ===== */
@media (max-width:680px){
  .grid{gap:14px}
  .btn{padding:.6rem .85rem}
}
/* Scanner modal + vidéo visibles et dimensionnés */
.scanner-modal { position: fixed; inset: 0; display: none; place-items: center; background: rgba(0,0,0,0.6); z-index: 9999; }
.scanner-box { width: min(600px, 96vw); background: var(--card,#fff); border-radius: 16px; padding: 16px; display: grid; gap: 12px; }
#scannerVideo { width: 100%; height: auto; min-height: 240px; background: #000; border-radius: 12px; }
.scanner-actions { display: flex; gap: 8px; justify-content: flex-end; flex-wrap: wrap; }

